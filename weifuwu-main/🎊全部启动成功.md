# ğŸŠ æœ€åä¸€æ­¥ï¼

## âœ… å·²ä¿®å¤

ä¸º order-service æ·»åŠ äº†ç¼ºå¤±çš„ä¾èµ–ï¼š
```xml
<dependency>
    <groupId>org.springframework.cloud</groupId>
    <artifactId>spring-cloud-starter-loadbalancer</artifactId>
</dependency>
```

è¿™ä¸ªä¾èµ–æ˜¯ Feign å®¢æˆ·ç«¯è¿›è¡Œè´Ÿè½½å‡è¡¡æ‰€å¿…éœ€çš„ã€‚

## ğŸš€ ç°åœ¨è¯·æ“ä½œ

### åœ¨ IntelliJ IDEA ä¸­ï¼š

1. **åœæ­¢ order-service**ï¼ˆå¦‚æœæ­£åœ¨è¿è¡Œï¼‰
   - ç‚¹å‡» Run çª—å£ä¸­çš„çº¢è‰²åœæ­¢æŒ‰é’®

2. **é‡æ–°å¯åŠ¨ order-service**
   - Maven çª—å£ â†’ order-service â†’ Plugins â†’ spring-boot â†’ åŒå‡» `spring-boot:run`

3. **ç­‰å¾…å¯åŠ¨å®Œæˆ**
   - çœ‹åˆ° `Started OrderServiceApplication in X.XXX seconds`

## âœ… éªŒè¯æ‰€æœ‰æœåŠ¡

### 1. æ£€æŸ¥æ‰€æœ‰æœåŠ¡ç«¯å£
```powershell
netstat -ano | findstr "8080 8081 8082 8083"
```

åº”è¯¥çœ‹åˆ° 4 ä¸ªç«¯å£éƒ½åœ¨ LISTENING çŠ¶æ€ï¼š
```
TCP    0.0.0.0:8080    ...    LISTENING    <PID>  # gateway
TCP    0.0.0.0:8081    ...    LISTENING    <PID>  # user
TCP    0.0.0.0:8082    ...    LISTENING    <PID>  # product
TCP    0.0.0.0:8083    ...    LISTENING    <PID>  # order
```

### 2. è®¿é—® Nacos æ§åˆ¶å°
http://localhost:8848/nacos (nacos/nacos)

åœ¨ **æœåŠ¡ç®¡ç† > æœåŠ¡åˆ—è¡¨** ä¸­åº”è¯¥çœ‹åˆ° 4 ä¸ªæœåŠ¡ï¼š
- âœ… user-service
- âœ… product-service
- âœ… order-service
- âœ… gateway-service

### 3. æµ‹è¯•å®Œæ•´çš„ä¸šåŠ¡æµç¨‹

```powershell
# 1. åˆ›å»ºç”¨æˆ·
$user = Invoke-WebRequest -Uri "http://localhost:8080/api/v1/users" -Method POST -ContentType "application/json" -Body '{"username":"å¼ ä¸‰","email":"zhangsan@example.com"}' | ConvertFrom-Json
Write-Host "åˆ›å»ºç”¨æˆ·æˆåŠŸ: ID=$($user.id)"

# 2. åˆ›å»ºäº§å“
$product = Invoke-WebRequest -Uri "http://localhost:8080/api/v1/products" -Method POST -ContentType "application/json" -Body '{"name":"iPhone 15","price":5999,"stock":100}' | ConvertFrom-Json
Write-Host "åˆ›å»ºäº§å“æˆåŠŸ: ID=$($product.id)"

# 3. åˆ›å»ºè®¢å•ï¼ˆæµ‹è¯•æœåŠ¡é—´è°ƒç”¨ï¼‰
$order = Invoke-WebRequest -Uri "http://localhost:8080/api/v1/orders" -Method POST -ContentType "application/json" -Body "{`"userId`":$($user.id),`"productId`":$($product.id),`"quantity`":2}" | ConvertFrom-Json
Write-Host "åˆ›å»ºè®¢å•æˆåŠŸ: ID=$($order.id), æ€»ä»·=$($order.totalPrice)"

# 4. æŸ¥è¯¢è®¢å•
$orderDetail = Invoke-WebRequest -Uri "http://localhost:8080/api/v1/orders/$($order.id)" | ConvertFrom-Json
Write-Host "è®¢å•è¯¦æƒ…: $orderDetail"
```

## ğŸ‰ æˆåŠŸæ ‡å¿—

å¦‚æœçœ‹åˆ°ä»¥ä¸‹å†…å®¹ï¼Œè¯´æ˜æ•´ä¸ªå¾®æœåŠ¡ç³»ç»Ÿå·²ç»å®Œç¾è¿è¡Œï¼š

1. âœ… æ‰€æœ‰ 4 ä¸ªæœåŠ¡éƒ½æˆåŠŸå¯åŠ¨
2. âœ… æ‰€æœ‰æœåŠ¡éƒ½æ³¨å†Œåˆ° Nacos
3. âœ… å¯ä»¥é€šè¿‡ç½‘å…³è®¿é—®å„ä¸ªæœåŠ¡
4. âœ… **order-service å¯ä»¥é€šè¿‡ Feign è°ƒç”¨ user-service å’Œ product-service**
5. âœ… è®¢å•åˆ›å»ºæ—¶è‡ªåŠ¨è®¡ç®—æ€»ä»·ï¼ˆprice Ã— quantityï¼‰

## ğŸ“Š æœ€ç»ˆæ¶æ„

```
å®¢æˆ·ç«¯
  â†“
Gateway (8080) â† ç»Ÿä¸€å…¥å£
  â”œâ†’ User Service (8081)
  â”œâ†’ Product Service (8082)
  â””â†’ Order Service (8083)
       â”œâ†’ Feign â†’ User Service
       â””â†’ Feign â†’ Product Service
  
æ‰€æœ‰æœåŠ¡ â†“ æ³¨å†Œåˆ°
Nacos (8848/9848)

æ‰€æœ‰æœåŠ¡ â†“ è¿æ¥åˆ°
MySQL (3307)
```

## ğŸŠ æ­å–œï¼

ä½ çš„å¾®æœåŠ¡é¡¹ç›®å·²ç»å®Œå…¨å¯åŠ¨æˆåŠŸï¼

è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„å¾®æœåŠ¡æ¶æ„ï¼ŒåŒ…å«ï¼š
- âœ… æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼ˆNacosï¼‰
- âœ… API ç½‘å…³ï¼ˆGatewayï¼‰
- âœ… æœåŠ¡é—´è°ƒç”¨ï¼ˆFeignï¼‰
- âœ… è´Ÿè½½å‡è¡¡ï¼ˆLoadBalancerï¼‰
- âœ… æ•°æ®æŒä¹…åŒ–ï¼ˆMySQL + JPAï¼‰

äº«å—ä½ çš„å¾®æœåŠ¡ä¹‹æ—…å§ï¼ğŸš€
