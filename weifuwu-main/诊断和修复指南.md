# ğŸ”§ æœåŠ¡å¯åŠ¨å¤±è´¥è¯Šæ–­å’Œä¿®å¤æŒ‡å—

## å½“å‰çŠ¶æ€
- âœ… gateway-service: æ­£å¸¸å¯åŠ¨
- âŒ user-service: å¯åŠ¨å¤±è´¥
- âŒ product-service: å¯åŠ¨å¤±è´¥  
- âŒ order-service: å¯åŠ¨å¤±è´¥

## ğŸ” å·²å®Œæˆçš„ä¿®å¤

æˆ‘åˆšåˆšæ›´æ–°äº†æ‰€æœ‰æœåŠ¡çš„æ•°æ®åº“é…ç½®ï¼Œæ·»åŠ äº†ï¼š
1. âœ… æ˜ç¡®æŒ‡å®š MySQL é©±åŠ¨ç±»
2. âœ… æ·»åŠ  `allowPublicKeyRetrieval=true` å‚æ•°
3. âœ… ä¿®æ”¹æ—¶åŒºä¸º `Asia/Shanghai`
4. âœ… æ·»åŠ å­—ç¬¦ç¼–ç è®¾ç½®

## ğŸš€ ç°åœ¨è¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œ

### æ­¥éª¤ 1ï¼šåœ¨ IDEA ä¸­é‡æ–°å¯åŠ¨æœåŠ¡

1. **åœæ­¢æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„æœåŠ¡**
   - åœ¨ IDEA åº•éƒ¨çš„ Run çª—å£ä¸­ï¼Œç‚¹å‡»çº¢è‰²åœæ­¢æŒ‰é’® â¹ï¸

2. **é‡æ–°å¯åŠ¨ user-service**
   - Maven çª—å£ â†’ user-service â†’ Plugins â†’ spring-boot â†’ åŒå‡» `spring-boot:run`
   - **ä»”ç»†è§‚å¯Ÿå¯åŠ¨æ—¥å¿—**

3. **æŸ¥çœ‹æ—¥å¿—ä¸­çš„å…³é”®ä¿¡æ¯**
   - å¦‚æœçœ‹åˆ° `Started UserServiceApplication in X.XXX seconds` â†’ âœ… æˆåŠŸ
   - å¦‚æœçœ‹åˆ°é”™è¯¯ä¿¡æ¯ â†’ å¤åˆ¶å®Œæ•´çš„é”™è¯¯å †æ ˆç»™æˆ‘

### æ­¥éª¤ 2ï¼šå¦‚æœè¿˜æ˜¯å¤±è´¥ï¼Œè·å–è¯¦ç»†æ—¥å¿—

#### æ–¹æ³• Aï¼šåœ¨ IDEA ä¸­æŸ¥çœ‹å®Œæ•´æ—¥å¿—
1. åœ¨ Run çª—å£ä¸­ï¼Œå‘ä¸Šæ»šåŠ¨æŸ¥çœ‹å®Œæ•´çš„å¯åŠ¨æ—¥å¿—
2. æ‰¾åˆ°ç¬¬ä¸€ä¸ª `ERROR` æˆ– `Exception` å…³é”®å­—
3. å¤åˆ¶ä» `ERROR` å¼€å§‹åˆ° `Caused by:` ç»“æŸçš„æ‰€æœ‰å†…å®¹

#### æ–¹æ³• Bï¼šä½¿ç”¨è°ƒè¯•è„šæœ¬
åŒå‡»è¿è¡Œ `debug-user-service.bat`ï¼Œå®ƒä¼šæ˜¾ç¤ºè¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯ã€‚

### æ­¥éª¤ 3ï¼šå¸¸è§é”™è¯¯å’Œè§£å†³æ–¹æ¡ˆ

#### é”™è¯¯ 1ï¼šæ•°æ®åº“è¿æ¥å¤±è´¥
**é”™è¯¯ä¿¡æ¯åŒ…å«**ï¼š
```
Communications link failure
Unable to connect to database
Access denied for user 'root'
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥ MySQL å®¹å™¨çŠ¶æ€
docker ps | findstr mysql

# æµ‹è¯•æ•°æ®åº“è¿æ¥
docker exec -i mysql mysql -uroot -p123456 -e "SELECT 1;"

# å¦‚æœå¤±è´¥ï¼Œé‡å¯ MySQL å®¹å™¨
docker restart mysql
```

#### é”™è¯¯ 2ï¼šç«¯å£è¢«å ç”¨
**é”™è¯¯ä¿¡æ¯åŒ…å«**ï¼š
```
Port 8081 was already in use
Address already in use
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```powershell
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
netstat -ano | findstr "8081"

# ç»“æŸè¿›ç¨‹ï¼ˆæ›¿æ¢ <PID>ï¼‰
taskkill /PID <PID> /F
```

#### é”™è¯¯ 3ï¼šNacos è¿æ¥å¤±è´¥
**é”™è¯¯ä¿¡æ¯åŒ…å«**ï¼š
```
Connection refused: localhost/127.0.0.1:8848
Unable to connect to Nacos server
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥ Nacos å®¹å™¨çŠ¶æ€
docker ps | findstr nacos

# å¦‚æœæ²¡æœ‰è¿è¡Œï¼Œå¯åŠ¨å®ƒ
docker start nacos

# æµ‹è¯• Nacos æ˜¯å¦å¯è®¿é—®
# åœ¨æµè§ˆå™¨æ‰“å¼€ï¼šhttp://localhost:8848/nacos
```

#### é”™è¯¯ 4ï¼šMaven ä¾èµ–é—®é¢˜
**é”™è¯¯ä¿¡æ¯åŒ…å«**ï¼š
```
ClassNotFoundException
NoClassDefFoundError
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. åœ¨ Maven çª—å£ä¸­å³é”®ç‚¹å‡»é¡¹ç›®
2. é€‰æ‹© **Maven** â†’ **Reload Project**
3. ç­‰å¾…ä¾èµ–é‡æ–°ä¸‹è½½
4. å†æ¬¡å°è¯•å¯åŠ¨

#### é”™è¯¯ 5ï¼šJPA/Hibernate é”™è¯¯
**é”™è¯¯ä¿¡æ¯åŒ…å«**ï¼š
```
Error creating bean with name 'entityManagerFactory'
Table doesn't exist
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
è¿™é€šå¸¸æ˜¯æ­£å¸¸çš„ï¼Œå› ä¸ºç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶è¡¨è¿˜ä¸å­˜åœ¨ã€‚
- JPA ä¼šè‡ªåŠ¨åˆ›å»ºè¡¨ï¼ˆå› ä¸ºé…ç½®äº† `ddl-auto: update`ï¼‰
- å¦‚æœæŒç»­å¤±è´¥ï¼Œæ£€æŸ¥æ•°æ®åº“æƒé™

## ğŸ“Š è¯Šæ–­æ£€æŸ¥æ¸…å•

åœ¨å¯åŠ¨æœåŠ¡å‰ï¼Œè¯·ç¡®è®¤ï¼š

### âœ… åŸºç¡€è®¾æ–½æ£€æŸ¥
```powershell
# 1. æ£€æŸ¥ Docker å®¹å™¨
docker ps

# åº”è¯¥çœ‹åˆ°ï¼š
# - mysql (ç«¯å£ 3307)
# - nacos (ç«¯å£ 8848)

# 2. æ£€æŸ¥æ•°æ®åº“
docker exec -i mysql mysql -uroot -p123456 -e "SHOW DATABASES;"

# åº”è¯¥çœ‹åˆ°ï¼š
# - user_db
# - product_db
# - order_db

# 3. æ£€æŸ¥ç«¯å£å ç”¨
netstat -ano | findstr "8080 8081 8082 8083 8848 3307"

# 8080-8083 åº”è¯¥æ˜¯ç©ºçš„ï¼ˆæ²¡æœ‰è¢«å ç”¨ï¼‰
# 8848 å’Œ 3307 åº”è¯¥åœ¨ LISTENING çŠ¶æ€
```

### âœ… é¡¹ç›®é…ç½®æ£€æŸ¥
1. Java ç‰ˆæœ¬ï¼š`java -version` åº”è¯¥æ˜¾ç¤º 21.x
2. Maven é¡¹ç›®å·²åŠ è½½ï¼šMaven çª—å£ä¸­èƒ½çœ‹åˆ°æ‰€æœ‰æ¨¡å—
3. æ²¡æœ‰ç¼–è¯‘é”™è¯¯ï¼šIDEA ä¸­æ²¡æœ‰çº¢è‰²æ³¢æµªçº¿

## ğŸ¯ é¢„æœŸçš„æˆåŠŸæ—¥å¿—

å½“æœåŠ¡æˆåŠŸå¯åŠ¨æ—¶ï¼Œä½ åº”è¯¥çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„æ—¥å¿—ï¼š

```
[INFO] --- spring-boot:3.2.5:run (default-cli) @ user-service ---
[INFO] Attaching agents: []

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.2.5)

2025-12-28 ... INFO ... : Starting UserServiceApplication
2025-12-28 ... INFO ... : No active profile set
2025-12-28 ... INFO ... : Bootstrapping Spring Data JPA repositories
2025-12-28 ... INFO ... : Finished Spring Data repository scanning
2025-12-28 ... INFO ... : Tomcat initialized with port 8081 (http)
2025-12-28 ... INFO ... : Starting service [Tomcat]
2025-12-28 ... INFO ... : HikariPool-1 - Starting...
2025-12-28 ... INFO ... : HikariPool-1 - Start completed.
2025-12-28 ... INFO ... : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-28 ... INFO ... : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-12-28 ... INFO ... : HHH000489: No JTA platform available
2025-12-28 ... INFO ... : Initialized JPA EntityManagerFactory
2025-12-28 ... INFO ... : Tomcat started on port 8081 (http)
2025-12-28 ... INFO ... : Started UserServiceApplication in 5.234 seconds
```

**å…³é”®æˆåŠŸæ ‡å¿—**ï¼š
- âœ… `HikariPool-1 - Start completed` - æ•°æ®åº“è¿æ¥æ± å¯åŠ¨æˆåŠŸ
- âœ… `Initialized JPA EntityManagerFactory` - JPA åˆå§‹åŒ–æˆåŠŸ
- âœ… `Tomcat started on port 8081` - Web æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ
- âœ… `Started UserServiceApplication in X.XXX seconds` - åº”ç”¨å¯åŠ¨å®Œæˆ

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœæŒ‰ç…§ä¸Šè¿°æ­¥éª¤æ“ä½œåä»ç„¶å¤±è´¥ï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š

1. **å®Œæ•´çš„é”™è¯¯æ—¥å¿—**ï¼ˆä»å¯åŠ¨å¼€å§‹åˆ°é”™è¯¯ç»“æŸï¼‰
2. **åŸºç¡€è®¾æ–½çŠ¶æ€**ï¼š
   ```powershell
   docker ps
   netstat -ano | findstr "8081 8848 3307"
   ```
3. **å…·ä½“å“ªä¸ªæœåŠ¡å¤±è´¥**ï¼šuser-service / product-service / order-service

æˆ‘ä¼šæ ¹æ®å…·ä½“çš„é”™è¯¯ä¿¡æ¯ç»§ç»­å¸®ä½ è§£å†³ï¼ğŸš€
