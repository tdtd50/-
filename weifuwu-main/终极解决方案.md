# ğŸ”¥ ç»ˆæè§£å†³æ–¹æ¡ˆ - NoClassDefFoundError

## é—®é¢˜æ ¹æº

ä½ é‡åˆ°çš„ `NoClassDefFoundError` æ˜¯å› ä¸º **IDEA æ²¡æœ‰æ­£ç¡®åŠ è½½ Maven ä¾èµ–åˆ°è¿è¡Œæ—¶ classpath**ã€‚

## âœ… æˆ‘å·²ç»åšçš„ä¿®å¤

1. âœ… å°†æ‰€æœ‰è¿è¡Œé…ç½®æ”¹ä¸ºä½¿ç”¨ **Maven æ–¹å¼è¿è¡Œ**ï¼ˆè€Œä¸æ˜¯ç›´æ¥è¿è¡Œ main æ–¹æ³•ï¼‰
2. âœ… åˆ›å»ºäº†ç‹¬ç«‹çš„å¯åŠ¨è„šæœ¬
3. âœ… ä¿®å¤äº† Java ç‰ˆæœ¬é…ç½®

## ğŸš€ è§£å†³æ–¹æ¡ˆï¼ˆæŒ‰é¡ºåºå°è¯•ï¼‰

---

### æ–¹æ¡ˆ 1ï¼šåœ¨ IDEA ä¸­ä½¿ç”¨ Maven è¿è¡Œï¼ˆæ¨èï¼‰

#### æ­¥éª¤ 1ï¼šæ‰“å¼€ Maven å·¥å…·çª—å£
1. ç‚¹å‡» IDEA å³ä¾§çš„ **Maven** æ ‡ç­¾ï¼ˆæˆ–æŒ‰ `Alt+M`ï¼‰
2. å±•å¼€ **ecommerce-system**
3. å±•å¼€ **user-service**
4. å±•å¼€ **Plugins**
5. å±•å¼€ **spring-boot**
6. **åŒå‡»** `spring-boot:run`

#### æ­¥éª¤ 2ï¼šå¯¹å…¶ä»–æœåŠ¡é‡å¤æ“ä½œ
- product-service â†’ Plugins â†’ spring-boot â†’ spring-boot:run
- order-service â†’ Plugins â†’ spring-boot â†’ spring-boot:run
- gateway-service â†’ Plugins â†’ spring-boot â†’ spring-boot:run

#### æ­¥éª¤ 3ï¼šéªŒè¯å¯åŠ¨
åœ¨ IDEA åº•éƒ¨çš„ **Run** çª—å£ä¸­ï¼Œä½ åº”è¯¥çœ‹åˆ°ï¼š
```
[INFO] --- spring-boot:3.2.5:run (default-cli) @ user-service ---
...
Started UserServiceApplication in X.XXX seconds
```

---

### æ–¹æ¡ˆ 2ï¼šåœ¨ IDEA ä¸­åˆ›å»ºæ–°çš„è¿è¡Œé…ç½®

#### æ­¥éª¤ 1ï¼šåˆ›å»º Maven è¿è¡Œé…ç½®
1. ç‚¹å‡»å³ä¸Šè§’çš„è¿è¡Œé…ç½®ä¸‹æ‹‰èœå•
2. é€‰æ‹© **Edit Configurations...**
3. ç‚¹å‡»å·¦ä¸Šè§’çš„ **+** å·
4. é€‰æ‹© **Maven**

#### æ­¥éª¤ 2ï¼šé…ç½® User Service
- **Name**: `User Service (Maven)`
- **Working directory**: é€‰æ‹© `user-service` ç›®å½•
- **Command line**: è¾“å…¥ `spring-boot:run`
- ç‚¹å‡» **OK**

#### æ­¥éª¤ 3ï¼šé‡å¤åˆ›å»ºå…¶ä»–æœåŠ¡çš„é…ç½®
- Product Service (Maven) - working dir: `product-service`
- Order Service (Maven) - working dir: `order-service`
- Gateway Service (Maven) - working dir: `gateway-service`

#### æ­¥éª¤ 4ï¼šè¿è¡Œ
é€‰æ‹©é…ç½®å¹¶ç‚¹å‡»è¿è¡ŒæŒ‰é’®

---

### æ–¹æ¡ˆ 3ï¼šä½¿ç”¨å‘½ä»¤è¡Œå¯åŠ¨ï¼ˆæœ€å¯é ï¼‰

#### æ­¥éª¤ 1ï¼šæ‰“å¼€ 4 ä¸ª PowerShell çª—å£

#### æ­¥éª¤ 2ï¼šåœ¨ç¬¬ 1 ä¸ªçª—å£å¯åŠ¨ User Service
```powershell
cd D:\--main\user-service
$env:JAVA_HOME = "C:\Program Files\Eclipse Adoptium\jdk-21.0.4.7-hotspot"
& "C:\Program Files\JetBrains\IntelliJ IDEA 2025.3.1\plugins\maven\lib\maven3\bin\mvn.cmd" spring-boot:run
```

#### æ­¥éª¤ 3ï¼šåœ¨ç¬¬ 2 ä¸ªçª—å£å¯åŠ¨ Product Service
```powershell
cd D:\--main\product-service
$env:JAVA_HOME = "C:\Program Files\Eclipse Adoptium\jdk-21.0.4.7-hotspot"
& "C:\Program Files\JetBrains\IntelliJ IDEA 2025.3.1\plugins\maven\lib\maven3\bin\mvn.cmd" spring-boot:run
```

#### æ­¥éª¤ 4ï¼šåœ¨ç¬¬ 3 ä¸ªçª—å£å¯åŠ¨ Order Service
```powershell
cd D:\--main\order-service
$env:JAVA_HOME = "C:\Program Files\Eclipse Adoptium\jdk-21.0.4.7-hotspot"
& "C:\Program Files\JetBrains\IntelliJ IDEA 2025.3.1\plugins\maven\lib\maven3\bin\mvn.cmd" spring-boot:run
```

#### æ­¥éª¤ 5ï¼šåœ¨ç¬¬ 4 ä¸ªçª—å£å¯åŠ¨ Gateway Service
```powershell
cd D:\--main\gateway-service
$env:JAVA_HOME = "C:\Program Files\Eclipse Adoptium\jdk-21.0.4.7-hotspot"
& "C:\Program Files\JetBrains\IntelliJ IDEA 2025.3.1\plugins\maven\lib\maven3\bin\mvn.cmd" spring-boot:run
```

---

### æ–¹æ¡ˆ 4ï¼šä¿®å¤ IDEA çš„ä¾èµ–è¯†åˆ«

#### æ­¥éª¤ 1ï¼šé‡æ–°å¯¼å…¥ Maven é¡¹ç›®
1. **File** â†’ **Close Project**
2. åœ¨æ¬¢è¿ç•Œé¢é€‰æ‹© **Open**
3. é€‰æ‹©é¡¹ç›®çš„ `pom.xml` æ–‡ä»¶
4. é€‰æ‹© **Open as Project**
5. ç­‰å¾… IDEA é‡æ–°ç´¢å¼•å’Œä¸‹è½½ä¾èµ–

#### æ­¥éª¤ 2ï¼šé…ç½® Maven
1. **File** â†’ **Settings** â†’ **Build, Execution, Deployment** â†’ **Build Tools** â†’ **Maven**
2. **Maven home path**: é€‰æ‹© **Bundled (Maven 3)**
3. å‹¾é€‰ **Always update snapshots**
4. ç‚¹å‡» **OK**

#### æ­¥éª¤ 3ï¼šé‡æ–°åŠ è½½
1. å³é”®ç‚¹å‡»é¡¹ç›®æ ¹ç›®å½•
2. é€‰æ‹© **Maven** â†’ **Reload Project**
3. ç­‰å¾…å®Œæˆ

#### æ­¥éª¤ 4ï¼šé‡å»ºé¡¹ç›®
1. **Build** â†’ **Rebuild Project**
2. ç­‰å¾…å®Œæˆ

#### æ­¥éª¤ 5ï¼šå†æ¬¡å°è¯•è¿è¡Œ
ä½¿ç”¨æ–¹æ¡ˆ 1 æˆ–æ–¹æ¡ˆ 2 çš„æ–¹å¼è¿è¡Œ

---

## ğŸ¯ å¦‚ä½•åˆ¤æ–­æœåŠ¡çœŸçš„å¯åŠ¨æˆåŠŸäº†ï¼Ÿ

### 1. æŸ¥çœ‹æ—¥å¿—è¾“å‡º
æˆåŠŸçš„æ—¥å¿—åº”è¯¥åŒ…å«ï¼š
```
  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.2.5)

...
Started UserServiceApplication in 5.234 seconds (process running for 5.678)
```

### 2. æ£€æŸ¥ç«¯å£ç›‘å¬
åœ¨ PowerShell ä¸­æ‰§è¡Œï¼š
```powershell
netstat -ano | findstr "8080 8081 8082 8083"
```

åº”è¯¥çœ‹åˆ°ï¼š
```
TCP    0.0.0.0:8080    0.0.0.0:0    LISTENING    <PID>
TCP    0.0.0.0:8081    0.0.0.0:0    LISTENING    <PID>
TCP    0.0.0.0:8082    0.0.0.0:0    LISTENING    <PID>
TCP    0.0.0.0:8083    0.0.0.0:0    LISTENING    <PID>
```

### 3. è®¿é—® Nacos æ§åˆ¶å°
æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼šhttp://localhost:8848/nacos
- ç”¨æˆ·åï¼šnacos
- å¯†ç ï¼šnacos

åœ¨ **æœåŠ¡ç®¡ç† > æœåŠ¡åˆ—è¡¨** ä¸­åº”è¯¥çœ‹åˆ° 4 ä¸ªæœåŠ¡ã€‚

### 4. æµ‹è¯• API
```powershell
# æµ‹è¯•ç”¨æˆ·æœåŠ¡
Invoke-WebRequest -Uri "http://localhost:8081/api/v1/users" -Method GET

# æµ‹è¯•ç½‘å…³
Invoke-WebRequest -Uri "http://localhost:8080/api/v1/users" -Method GET
```

---

## â“ ä¸ºä»€ä¹ˆä¹‹å‰çš„æ–¹å¼ä¸å·¥ä½œï¼Ÿ

1. **ç›´æ¥è¿è¡Œ main æ–¹æ³•**ï¼šIDEA ä½¿ç”¨çš„æ˜¯ç¼–è¯‘åçš„ class æ–‡ä»¶ï¼Œä½†æ²¡æœ‰æ­£ç¡®åŠ è½½æ‰€æœ‰ Maven ä¾èµ–
2. **Spring Boot é…ç½®ç±»å‹**ï¼šéœ€è¦ç‰¹æ®Šçš„ç±»åŠ è½½å™¨ï¼Œç›´æ¥è¿è¡Œä¼šç¼ºå°‘ä¾èµ–
3. **Maven ä¾èµ–ä¼ é€’**ï¼šé€šè¿‡ Maven è¿è¡Œå¯ä»¥ç¡®ä¿æ‰€æœ‰ä¼ é€’ä¾èµ–éƒ½è¢«æ­£ç¡®åŠ è½½

---

## ğŸ“ å¦‚æœè¿˜æ˜¯ä¸è¡Œ

è¯·æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¹¶æŠŠè¾“å‡ºå‘ç»™æˆ‘ï¼š

```powershell
# æ£€æŸ¥ Java ç‰ˆæœ¬
java -version

# æ£€æŸ¥ Maven æ˜¯å¦å¯ç”¨
& "C:\Program Files\JetBrains\IntelliJ IDEA 2025.3.1\plugins\maven\lib\maven3\bin\mvn.cmd" -version

# æ£€æŸ¥ä¾èµ–
cd user-service
& "C:\Program Files\JetBrains\IntelliJ IDEA 2025.3.1\plugins\maven\lib\maven3\bin\mvn.cmd" dependency:tree
```

æˆ‘ä¼šæ ¹æ®è¾“å‡ºç»§ç»­å¸®ä½ è§£å†³ï¼
